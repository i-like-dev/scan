<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ç§‘æŠ€å–µ - å°ˆç”¨æƒç¢¼å™¨</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/html5-qrcode@2.3.10/minified/html5-qrcode.min.js"></script>
<style>
body { font-family:'Noto Sans TC',sans-serif; background:#0d0d23; color:white; display:flex; flex-direction:column; align-items:center; justify-content:center; height:100vh; margin:0; overflow:hidden;}
.scanner-box { position:relative; background: rgba(255,255,255,0.08); border-radius:20px; padding:20px; width:340px; box-shadow:0 0 40px rgba(0,255,255,0.2); text-align:center;}
h1{text-shadow:0 0 15px cyan;margin-bottom:10px;}
#reader{width:300px;height:300px;margin:0 auto;border-radius:15px;overflow:hidden;}
.laser{position:absolute;top:0;left:0;width:100%;height:3px;background:linear-gradient(90deg,transparent,cyan,transparent);animation:scan 2s infinite linear;}
@keyframes scan{0%{top:0}50%{top:calc(100%-3px)}100%{top:0}}
</style>
</head>
<body>

<div class="scanner-box">
  <h1>ğŸš€ ç§‘æŠ€å–µ - å°ˆç”¨æƒç¢¼å™¨</h1>
  <p>å°‡ QR å°æº–é¡é ­æƒæ</p>
  <div id="reader"></div>
  <div class="laser"></div>
</div>

<script>
const SECRET_SIG="|sig=TechMeowSpecial";

function decrypt(encoded){
  try{
    const reversed=encoded.split("").reverse().join("");
    const decoded=decodeURIComponent(escape(atob(reversed)));
    if(!decoded.includes(SECRET_SIG)) return null;
    return decoded.replace(SECRET_SIG,"");
  }catch{return null;}
}

function startScanner(){
  const html5QrCode = new Html5Qrcode("reader");
  html5QrCode.start(
    { facingMode: "environment" },
    { fps: 10, qrbox: 250 },
    qrCodeMessage=>{
      if(qrCodeMessage.includes("/index.html#")){
        const encoded=qrCodeMessage.split("#")[1];
        const link=decrypt(encoded);
        if(link){
          html5QrCode.stop().then(()=>{
            alert("âœ… é©—è­‰æˆåŠŸï¼Œé–‹å•Ÿå°ˆå±¬é é¢");
            location.href=link;
          });
        } else alert("âš ï¸ éæˆæ¬Š QR Code");
      } else alert("âŒ éæœ¬ç³»çµ± QR Code");
    },
    errorMessage=>{
      // å¯å¿½ç•¥æƒæéç¨‹éŒ¯èª¤
    }
  ).catch(err=>{
    alert("âŒ ç„¡æ³•å•Ÿå‹•ç›¸æ©Ÿ: "+err);
  });
}

// å•Ÿå‹•æƒæå™¨
window.onload=startScanner;
</script>

</body>
</html>
